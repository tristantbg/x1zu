@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'
@import 'normalize.css'
@import '../oembed/oembed.css'

// Media queries
$desktop = 1600px
$laptop = 1100px
$tablet = 770px
$mobile = 400px

// Colors
$primary ?= #fff
$secondary ?= #000

// Metrics
$padding = 20px

// CSS Reset
global-reset()
//edit()

webfont('BS', 'BS', true, 'normal')

body,html
	width 100%
	background-color $primary
	color $secondary
	-webkit-text-size-adjust 100%
	::-webkit-scrollbar
		display none

html
	font-family 'BS', 'Helvetica Neue', 'Arial', sans-serif
	font-size 62.5%

body
	text-rendering optimizeLegibility
	font-smoothing()
	font-size 1.3em
	letter-spacing .1em
	line-height 1
	+below($tablet)
		font-size 1.8rem !important

p
	margin-bottom 1em

p:last-of-type
	margin-bottom 0

h1, h2
	hideselect()
	text-transform uppercase

strong
	text-transform uppercase

li
	list-style none

::selection
	background lightgrey
	
::-moz-selection
	background lightgrey

*
	box-sizing()

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

.hidescroll
	+above($tablet)
		overflow-y scroll
		//margin-right -16px
		height 100%

.loader
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary url('../images/loader.gif') center no-repeat
	background-size 15px
	z-index 10000

img.lazyimg
	transition(opacity)
	opacity 0

img.lazyimg.lazyloaded
	opacity 1

#intro
	position fixed
	flexbox()
	justify-content space-between
	flex-direction column
	font-size 30vw
	text-transform uppercase
	top 0
	left 0
	z-index 10000
	text-align center
	padding $padding
	background $primary
	width 100%
	height 100vh
	cursor pointer
	transition(all,600ms)
	opacity 1
	visibility visible
	+below($tablet)
		padding ($padding / 2)
		font-size 29vw
	span
		margin-bottom -.36em
	
#intro.hidden
	opacity 0
	visibility hidden

header
	hideselect()
	position fixed
	top 0
	left 0
	z-index 1000
	width 100%
	#topbar
		width 100%
		position absolute
		padding $padding $padding 0
		+below($tablet)
			width 'calc(100% - %s)' % ($padding)
			left ($padding / 2)
			padding ($padding / 2) 0 0
		#site_title
			position absolute
			top $padding
			left $padding
		nav#menu
			position absolute
			top $padding
			left 50%
			ul
				li
					display inline-block
					margin-right .3em
				li.active
					border-bottom 1px solid

#container
	margin-top 6rem
	padding 0 $padding $padding
	line-height 1.6em
	+above($desktop)
		margin-top 13rem
	+below($tablet)
		margin-top 8rem
	.inner
		.page_content
			position relative
			transition(opacity)
			opacity 1
			z-index 100
			+below($tablet)
				margin 0 ($padding / 2) ($padding / 2)
			.column
				span(1/2)
				+below($tablet)
					stack()
			.column.right
				+above($tablet)
					span(1/2, offset: 1/2)
			section, .subsection
				span(1)
				margin-bottom 1.3em
			section:last-of-type, .subsection:last-of-type
				margin-bottom 0
			span.season
				span(1/10)
			span.section-title
				span(1/4)
			span.subsections
				span(3/4)
				.column
					span(1/3)
				.entries
					span(2/3)
					.column
						span(1/2)
			div.image
				span(1/2.9)
				position absolute
				margin-bottom $padding
				background $primary url('../images/loader.gif') center no-repeat
				background-size 15px
				+below($tablet)
					position initial
			div.left
				left 0
			div.midleft
				left 33%
				margin-left -17%
			div.center
				left 50%
				margin-left -17%
			div.midright
				right 33%
				margin-right -17%
			div.right
				right 0
			div.image, div.left, div.midleft, div.midright, div.right
				+below($tablet)
					margin 0 0 ($padding / 2)
					width 100%

body.leaving
	cursor wait
	#container .inner
		.page_content
			opacity 0

body.page
	header
		+below($tablet)
			background $primary
		#topbar
			+below($tablet)
				background $primary
	header.scrolled
		#topbar
			+below($tablet)
				border-bottom 1px solid

.no-js
	.loader, #intro, .lazyimg
		display none